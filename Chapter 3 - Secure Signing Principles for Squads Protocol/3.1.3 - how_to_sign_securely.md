# ğŸ§  How to Sign Securely on Squads

> This guide helps Squads signers understand **how to protect themselves** during the signing process â€” even when attackers target frontends, metadata, or relay infrastructure.

---

## ğŸ” Before Signing: The Secure Signing Mindset

- Treat **every transaction** as if the UI could be compromised.
- Donâ€™t assume others have already reviewed it â€” trust no one.
- Always verify the **transaction intent**, **execution policy**, and **frontend integrity hash**.

---

## âœ… 1. Review the TXIntent File

- Ensure you are using a `.txintent.json` file â€” **not just a raw buffer.**
- Run the CLI command:
  ```bash
  secure-cli review ./txintent.json
  ```

Check for:

| Field                        | What to Look For                                         |
| ---------------------------- | -------------------------------------------------------- |
| `transaction_type`           | Transfer? Upgrade? Config? (Be clear)                    |
| `destination` / `program_id` | Does it match expectations?                              |
| `amount` / `actions`         | Human-readable explanation present?                      |
| `client_hash`                | Matches known frontend hash?                             |
| `execution_policy`           | Threshold, timelock, and manual execution set correctly? |

---

## âœ… 2. Validate Hashes (No Signature Yet)

Use:

```bash
secure-cli validate-intent ./txintent.json
```

- Confirms canonical hash
- Confirms frontend (client) hash
- Warns if unsigned or malformed

---

## âœ… 3. Run Policy Check (Enforces Security Rules)

Use:

```bash
secure-cli check-policy ./txintent.json
```

Enforces:

- `min_signers`
- `manual_execution_required`
- Timelocks
- Role boundaries (executor â‰  signer)

---

## âœ… 4. Sign Only If All Checks Pass

Use:

```bash
secure-cli sign ./txintent.json
```

âœ”ï¸ Recommended: use a **hardware wallet**  
âœ”ï¸ Optional: run in **airgapped environment**  
âœ”ï¸ Emit `sign_log.json` for audit and traceability

---

## ğŸ” Optional: Simulate Before Signing

Dry-run the transaction against a Solana node:

```bash
secure-cli simulate ./txintent.json
```

- Validates destination program behavior
- Doesnâ€™t send or sign anything

---

## ğŸ›¡ï¸ Threat Checklist: Ask Before You Sign

| Question                                                 | Why It Matters                        |
| -------------------------------------------------------- | ------------------------------------- |
| â€œDoes this txintent hash match what others are signing?â€ | Prevents spoofed tx swap              |
| â€œIs the frontend hash trusted and unmodified?â€           | Prevents UI deception                 |
| â€œHas anyone changed the signer quorum recently?â€         | Detects governance drift              |
| â€œAm I the last signer?â€                                  | Critical: attacker may rush execution |
| â€œDo I recognize this action?â€                            | Stops intent mismatch & upgrades      |

---

## ğŸ§© UX and OOB Verification

- Always review the **printed `intent_hash`** or **QR code hash**
- Use **multiclient flows** (CLI + frontend)
- Never sign **just because others have**

---

## ğŸš« Red Flags = Don't Sign

- âŒ Unfamiliar program ID
- âŒ Missing semantic summary
- âŒ Client hash mismatch
- âŒ Execution is automatic
- âŒ Proposal was just submitted (no review delay)

---

## âœ… Summary: Signing Principles in Action

| Secure Principle       | How to Follow It                            |
| ---------------------- | ------------------------------------------- |
| Intent Clarity         | Use `txintent.json` + review intent summary |
| Execution Delay        | Enforce timelock + never auto-execute       |
| Frontend Verifiability | Match `client_hash` to trusted deployment   |
| Policy Enforcement     | Use CLI `check-policy` before signing       |
| Canonical Logging      | Store `sign_log.json` locally or in IPFS    |

---

## ğŸ“ Save These CLI Commands

```bash
secure-cli review ./txintent.json
secure-cli validate-intent ./txintent.json
secure-cli check-policy ./txintent.json
secure-cli sign ./txintent.json
secure-cli simulate ./txintent.json
```
